<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.grabme.mappers.ShopMapper">

	<!-- insert shop -->
	<insert id="insertShop">
		insert into shop(user_idx,category_idx,thumbnail,title,address,introduction)
		value(#{user_idx},#{category_idx},#{thumbnail},#{title},#{address},#{introduction})
	</insert>

	<!-- select shop idx -->
	<select id="selectShopIdx" resultType="Integer">
		select idx from shop where user_idx=#{user_idx};
	</select>
	
	<!-- check shop -->
	<select id="checkShop" resultType="Integer">
		select count(*) from shop where user_idx=#{user_idx}
	</select>
	
	<select id="selectShopAllinfo" resultType="com.grabme.vo.ShopAllVO">
		select shop.category_idx, shop.thumbnail, shop.title, shop.address, shop.introduction, 
		externalChannel.openkatalkURL, externalChannel.instaURL
		from shop left join externalChannel on shop.idx = externalChannel.shop_idx 
		where shop.user_idx = #{user_idx}
	</select>
	


</mapper>